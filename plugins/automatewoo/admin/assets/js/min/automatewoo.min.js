var AutomateWoo,AW={};!function(n){AW.init=function(){AW.params=automatewooLocalizeScript,AW.initTooltips(),AW.initWorkflowStatusSwitch(),AW.initShowHide(),AW.initHoverableDates(),n(document.body).on("wc-enhanced-select-init",function(){AW.initEnhancedSelects()})},AW.initTooltips=function(){n(".automatewoo-help-tip, .automatewoo-tiptip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})},AW.initEnhancedSelects=function(){AW.initEnhancedSelectsLegacy(),n("select.automatewoo-json-search").filter(":not(.enhanced)").each(function(){var t={allowClear:!!n(this).data("allow_clear"),placeholder:n(this).data("placeholder"),minimumInputLength:"1",escapeMarkup:function(t){return t},ajax:{url:AW.params.url.ajax,dataType:"json",quietMillis:250,data:function(t){var a={term:t.term,action:n(this).data("action")},i=n(this).data("pass-sibling");if(i){var e=n('[name="'+i+'"]');e.length&&(a.sibling=e.val())}return a},processResults:function(t){var i=[];return t&&n.each(t,function(t,a){i.push({id:t,text:a})}),{results:i}},cache:!0}};n(this).select2(t).addClass("enhanced")})},AW.initEnhancedSelectsLegacy=function(){n(".automatewoo-json-search:not(select)").filter(":not(.enhanced)").each(function(){var t={allowClear:!!n(this).data("allow_clear"),placeholder:n(this).data("placeholder"),minimumInputLength:1,escapeMarkup:function(t){return t},ajax:{url:ajaxurl,dataType:"json",quietMillis:250,data:function(t){var a={term:t,action:n(this).data("action")},i=n(this).data("pass-sibling");if(i){var e=n('[name="'+i+'"]');e.length&&(a.sibling=e.val())}return a},results:function(t){var i=[];return t&&n.each(t,function(t,a){i.push({id:t,text:a})}),{results:i}},cache:!0}};!0===n(this).data("multiple")?(t.multiple=!0,t.initSelection=function(t,a){var i=n.parseJSON(t.attr("data-selected")),e=[];return n(t.val().split(",")).each(function(t,a){e.push({id:a,text:i[a]})}),a(e)},t.formatSelection=function(t){return'<div class="selected-option" data-id="'+t.id+'">'+t.text+"</div>"}):(t.multiple=!1,t.initSelection=function(t,a){return a({id:t.val(),text:t.attr("data-selected")})}),n(this).select2(t).addClass("enhanced")})},AW.initWorkflowStatusSwitch=function(){n(".aw-switch.js-toggle-workflow-status").click(function(){var t,a;(t=n(this)).is(".aw-loading")||(a="on"===t.attr("data-aw-switch")?"off":"on",t.addClass("aw-loading"),t.attr("data-aw-switch",a),n.post(ajaxurl,{action:"aw_toggle_workflow_status",workflow_id:t.attr("data-workflow-id"),new_state:a},function(){t.removeClass("aw-loading")}))})},AW.price=function(t){var a=t.toFixed(2),i=AW.params.locale.currency_symbol;switch(AW.params.locale.currency_position){case"right":a+=i;break;case"right_space":a=a+" "+i;break;case"left":a=i+a;break;case"left_space":default:a=i+" "+a}return a},AW.block=function(t){t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},AW.initShowHide=function(){var t=function(a){var i=a.data("automatewoo-bind"),e=a.val(),o=a.is('input[type="checkbox"]');n("[data-automatewoo-show]").each(function(){if(o&&n(this).data("automatewoo-show")===i)a.is(":checked")?n(this).show():n(this).hide();else{var t=n(this).data("automatewoo-show").split("=");if(t[0]!==i)return;-1!==t[1].split("|").indexOf(e)?n(this).show():n(this).hide()}}),n("[data-automatewoo-hide]").each(function(){if(o&&n(this).data("automatewoo-hide")===i)a.is(":checked")?n(this).hide():n(this).show();else{var t=n(this).data("automatewoo-hide").split("=");if(t[0]!==i)return;-1!==t[1].split("|").indexOf(e)?n(this).hide():n(this).show()}})};n(document).on("change","[data-automatewoo-bind]",function(){t(n(this))}),n("[data-automatewoo-bind]").each(function(){t(n(this))})},AW.initHoverableDates=function(){n(".automatewoo-hoverable-date").hover(function(){n(this).text(n(this).data("automatewoo-date-no-diff"))},function(){n(this).text(n(this).data("automatewoo-date-with-diff"))})},n(document).ready(function(){AW.init()})}(jQuery),jQuery(function(e){(AutomateWoo={_email_preview_window:null,init:function(){this.init_notice_dismiss(),this.init_date_pickers()},notices:{success:function(t,a){a.length&&a.before('<div class="automatewoo-notice updated fade"><p><strong>'+t+"</strong></p></div>")},error:function(t,a){a.length&&a.before('<div class="automatewoo-notice error fade"><p><strong>'+t+"</strong></p></div>")},clear_all:function(){e(".automatewoo-notice").slideUp()}},init_notice_dismiss:function(){e(".aw-notice-licence-renew").on("click",".notice-dismiss",function(){e.ajax({url:ajaxurl,data:{action:"aw_dismiss_expiry_notice"}})}),e(".aw-notice-system-error").on("click",".notice-dismiss",function(){e.ajax({url:ajaxurl,data:{action:"aw_dismiss_system_error_notice"}})})},init_date_pickers:function(){e(".automatewoo-date-picker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0})},isEmailPreviewOpen:function(){return this._email_preview_window&&!this._email_preview_window.closed},openLoadingEmailPreview:function(){this.openPreviewWindow(AW.params.url.admin+"admin.php?page=automatewoo-preview&action=loading")},open_email_preview:function(t,a){var i={page:"automatewoo-preview",action:"preview-ui",type:t,args:a};this.openPreviewWindow(AW.params.url.admin+"admin.php?"+e.param(i))},openPreviewWindow:function(t){this._email_preview_window=window.open(t,"automatewoo_preview","titlebar=no,toolbar=no,height=768,width=860,resizable=yes,status=no")}}).init()});
//# sourceMappingURL=automatewoo.min.js.map
